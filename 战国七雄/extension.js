game.import("extension", function (lib, game, ui, get, ai, _status) {
    return {
        name: "战国七雄",
        content: function (config, pack) {

        },
        precontent: function () {

        },
        help: {},
        config: {},
        package: {
            character: {
                character: {
                    "ex_baiqi": ["male", "ex_qin", 4, ["ex_xuetu", "ex_kengsha"], ["des:白起（？—公元前257年），又称公孙起，战国时期秦国郿县（今陕西省眉县常兴镇白家村）人，中国古代著名的将领、军事家。 白起在秦昭王时征战六国，为秦国统一六国做出了巨大的贡献。曾在伊阕之战大破魏韩联军，攻陷楚国国都郢城，长平之战重创赵国主力，功勋赫赫，白起是继中国历史上自孙武、吴起之后又一个杰出的军事家、统帅，与廉颇、李牧、王翦并称为战国四大名将，位列战国四大名将之首。"]],
                    "ex_lvbuwei": ["male", "ex_qin", 3, ["ex_qihuo"], ["des:吕不韦（前292年—前235年），姜姓，吕氏，名不韦，卫国濮阳（今河南省安阳市滑县）人。战国末年著名商人、政治家、思想家，官至秦国丞相。  公元前251年，秦昭襄王去世，太子安国君继位，为秦孝文王，立一年而卒，储君嬴子楚继位，即秦庄襄王，前249年以吕不韦为相国，封文信侯，食邑河南洛阳十万户，门下有食客3000人，家僮万人。庄襄王卒，年幼的太子政立为王，吕不韦为相邦，号称“仲父”，专断朝政。  吕不韦主持编纂《吕氏春秋》（又名《吕览》），有八览、六论、十二纪共20余万言，汇合了先秦各派学说，“兼儒墨，合名法”，故史称“杂家”。书成之日，悬于国门，声称能改动一字者赏千金。此为“一字千金”。  执政时曾攻取周、赵、卫的土地，立三川、太原、东郡，对秦王政兼并六国的事业有重大贡献。后因嫪毐集团叛乱事受牵连，被免除相邦职务，出居河南封地。不久，秦王政复命让其举家迁蜀，吕不韦担心被诛杀，于是饮鸩自尽。"]],
                    "ex_yingzheng": ["male", "ex_qin", 4, ["ex_tunbing", "ex_zulong"], ["des:秦始皇（前259年农历十二月初三—前210年），嬴姓，赵氏，名政，又名赵正（政）、秦政，或称祖龙，秦庄襄王之子。中国历史上著名的政治家、战略家、改革家，首位完成华夏大一统的铁腕政治人物，也是古今中外第一个称皇帝的君主。"]],
                    "ex_shangyang": ["male", "ex_qin", 3, ["ex_bianfa"], ["des:商鞅（约公元前395年－公元前338年），战国时期政治家、改革家、思想家，法家代表人物，卫国（今河南省安阳市内黄县梁庄镇）人，卫国国君的后裔，姬姓公孙氏，故又称卫鞅、公孙鞅。后因在河西之战中立功获封商于十五邑，号为商君，故称之为商鞅。  商鞅通过变法使秦国成为富裕强大的国家，史称“商鞅变法”。政治上，商鞅改革了秦国户籍、军功爵位、土地制度、行政区划、税收、度量衡以及民风民俗，并制定了严酷的法律；经济上商鞅主张重农抑商、奖励耕织，军事上商鞅作为统帅率领秦军收复了河西。  公元前338年，秦孝公逝世，其子秦惠文王继位。秦孝公去世的同年，商鞅因被公子虔诬陷谋反，战败死于彤地，其尸身被带回咸阳，处以车裂后示众。"]],
                    "ex_zhangyi": ["male", "ex_qin", 3, ["ex_lianheng", "ex_qiaoshe"], ["des:张仪（？－前309年），魏国安邑（今山西万荣）张仪村人，魏国贵族后裔，战国时期著名的纵横家、外交家和谋略家。  张仪首创连横的外交策略，游说入秦。秦惠王封张仪为相，后来张仪出使游说各诸侯国，以“横”破“纵”，使各国纷纷由合纵抗秦转变为连横亲秦。张仪也因此被秦王封为武信君。  秦惠王死后，因为即位的秦武王在当太子的时候就不喜欢张仪，张仪出逃魏国，并出任魏相，一年后去世。"]],
                    "ex_wangjian": ["male", "ex_qin", 4, ["ex_wucheng", "ex_wenjiang"], ["des:王翦，战国时期秦国名将，关中频阳东乡（今陕西富平东北）人，秦代杰出的军事家，主要战绩有破赵国都城邯郸，消灭燕、赵；以秦国绝大部分兵力消灭楚国。与其子王贲一并成为秦始皇兼灭六国的最大功臣。杰出的军事指挥才能使其与白起、李牧、廉颇并列为战国四大名将。王翦是琅琊王氏和太原王氏的始祖。  西汉司马迁认为王翦作为秦国将领，平定六国，功绩卓著，秦始皇尊其为师，可是他不能辅佐秦始皇建立德政，以巩固国家根基，和白起比较可谓是“尺有所短，寸有所长”。"]],
                    "ex_mengtian": ["male", "ex_qin", 4, ["ex_shushou", "ex_zhiyi"], ["des:蒙恬（约公元前259年—公元前210年），姬姓，蒙氏，名恬，祖籍齐国（今山东省临沂市蒙阴县）人，秦朝著名将领。  蒙恬出身名将世家，自幼胸怀大志。公元前221年，蒙恬被封为将军，攻破齐国，拜为内史 ，深得秦始皇的尊宠，当时与其弟蒙毅号称“忠信”。秦统一后，蒙恬率三十万大军北击匈奴。收复河南地（今内蒙古河套南鄂尔多斯市一带），率军修了万里长城和九州直道，克服了国内交通闭塞的困境。大大促进了北方各族人民经济、文化的交流和融合。[1]公元前210年，秦始皇病死，中车府令赵高同丞相李斯、公子胡亥暗中谋划政变，胡亥即位后，赐死蒙氏兄弟，蒙恬吞药自杀。  蒙恬曾驻守九郡十余年，威震匈奴，被誉为“中华第一勇士”。据传蒙恬曾改良过毛笔，因此也被誉为“笔祖”。他是中国西北最早的开发者，也是古代开发宁夏第一人。"]],
                    "ex_lisi": ["male", "ex_qin", 3, ["ex_fenshu", "ex_fazhi"], ["des:李斯（约公元前284年—公元前208年），李氏，名斯，字通古。战国末期楚国上蔡人。秦代著名的政治家、文学家和书法家。  李斯早年为郡小吏，后从荀子学帝王之术，学成入秦。初被吕不韦任以为郎。后劝说秦王政灭诸侯、成帝业，被任为长史。秦王采纳其计谋，遣谋士持金玉游说关东六国，离间各国君臣，又任其为客卿。秦王政十年（前237年）由于韩人间谍郑国入秦，秦王下令驱逐六国客卿。李斯上《谏逐客书》阻止，被秦王所采纳，不久官为廷尉。在秦王政灭六国的事业中起了较大作用。秦统一天下后，与王绾、冯劫议定尊秦王政为皇帝，并制定有关的礼仪制度。被任为丞相。他建议拆除郡县城墙，销毁民间的兵器；反对分封制，坚持郡县制；又主张焚烧民间收藏的《诗》、《书》等百家语，禁止私学，以加强中央集权的统治。还参与制定了法律，统一车轨、文字、度量衡制度。李斯政治主张的实施对中国和世界产生了深远的影响，奠定了中国两千多年政治制度的基本格局。  秦始皇死后，他与赵高合谋，伪造遗诏，迫令始皇长子扶苏自杀，立少子胡亥为二世皇帝。后为赵高所忌，于秦二世二年（前208年）被腰斩于咸阳闹市，并夷三族。"]],
                    "ex_simacuo": ["male", "ex_qin", 4, ["ex_poshu"], ["des:司马错，生卒年不详，秦国少梁（今陕西韩城南）人，史学家司马迁八世祖，战国时期秦国著名将领，历仕秦惠文王、秦武王、秦昭襄王三朝。  司马错学属纵横家。曾跟张仪有过争论，主张得蜀即得楚。秦惠文王九年（公元前316年），司马错率军灭亡蜀国。秦昭襄王二十七年（公元前280年），司马错率领陇西军南下东攻楚国，迫使楚国献出汉水以北和上庸（今湖北西北部）之地。其后事迹不详。"]],
                    "ex_fanju": ["male", "ex_qin", 3, ["ex_yuanjiao", "ex_jingong"], ["des:范雎（？－前255年），字叔，魏国芮城（今山西芮城）人，著名政治家、军事谋略家，秦国宰相，因封地在应城，所以又称为“应侯”。 范雎本是魏国中大夫须贾门客，因被怀疑通齐卖魏，差点被魏国相国魏齐鞭笞致死，后在郑安平的帮助下，易名张禄，潜随秦国使者王稽入秦。 范雎见秦昭王之后，提出了远交近攻的策略，抨击穰侯魏冉越过韩国和魏国而进攻齐国的做法。他主张将韩、魏作为秦国兼并的主要目标，同时应该与齐国等保持良好关系。范遂被拜为客卿，之后，他又提醒昭王，秦国的王权太弱，需要加强王权。秦昭王遂于前266年废太后，并将国内四大贵族赶出函谷关外，拜范雎为相。 范雎为人恩怨分明，掌权后先羞辱魏使须贾，之后又迫使魏齐自尽。又举荐郑安平出任秦国大将，王稽出任河东守。 前262年，长平之战爆发，两军对垒三年后，范雎以反间计使赵国启用无实战能力的赵括代廉颇为将，使得白起大破赵军。长平战后，范雎妒忌白起的军功，借秦昭王之命迫使白起自杀。 此后秦军遭诸侯援军所破，郑安平降赵。前255年，王稽也因通敌之罪被诛。范雎因此失去秦昭王的宠信，不得不推举蔡泽代替自己的位置，辞归封地，不久病死。"]],
                    "ex_huangxie": ["male", "ex_chu", 3, ["ex_zhaoxian"], ["des:黄歇（前314年－前238年），楚国江夏人，原籍楚国属国黄国（今河南省潢川县）。战国时期楚国大臣，是著名的政治家。与魏国信陵君魏无忌、赵国平原君赵胜、齐国孟尝君田文并称为“战国四公子”，曾任楚相。黄歇游学博闻，善辩。楚考烈王元年（前262年），以黄歇为相，封为春申君。赐淮北地12县。 公元前238年，楚考烈王病逝，黄歇在前去奔丧，李园令人埋伏于棘门之内，杀死春申君及其全家。又据《越绝书》表明黄歇是在楚幽王之时为楚幽王所杀"]],
                    "ex_quyuan": ["male", "ex_chu", 3, ["ex_xiangcao", "ex_xunguo"], ["des:屈原（公元前340年－公元前278年），战国时期楚国诗人、政治家。芈姓，屈氏，名平，字原；又自云名正则，字灵均。约公元前340年出生于楚国丹阳，楚武王熊通之子屈瑕的后代。他出身于楚宗室贵族，少年时受过良好的教育，博闻强志，志向远大。  屈原是中国历史上第一位伟大的爱国诗人，中国浪漫主义文学的奠基人，被誉为“中华诗祖”、“辞赋之祖”。他是“楚辞”的创立者和代表作者，开辟了“香草美人”的传统。屈原的出现，标志着中国诗歌进入了一个由集体歌唱到个人独创的新时代。  屈原还是楚国重要的政治家，早年受楚怀王信任，任左徒、三闾大夫，兼管内政外交大事。吴起之后，在楚国另一个主张变法的就是屈原。他提倡“美政”，主张对内举贤任能，修明法度，对外力主联齐抗秦。因遭贵族排挤毁谤，被先后流放至汉北和沅湘流域。  公元前278年，秦将白起攻破楚都郢（今湖北江陵），屈原悲愤交加，怀石自沉于汨罗江，以身殉国。统治者为树立忠君爱国标签将端午作为纪念屈原的节日。1953年是屈原逝世2230周年，世界和平理事会通过决议，确定屈原为当年纪念的世界四大文化名人之一。  主要作品有《离骚》《九歌》《九章》《天问》等。他创作的《楚辞》是中国浪漫主义文学的源头，与《诗经》中的“国风”并称“风骚”，对后世诗歌产生了深远影响。"]],
                    "ex_wuqi": ["male", "ex_chu", 3, ["ex_qiru"], ["des:吴起（前440年－前381年），中国战国初期军事家、政治家、改革家，兵家代表人物。卫国左氏（一说今山东省菏泽市曹县，一说今山东菏泽市定陶区）人。吴起一生历仕鲁、魏、楚三国，通晓兵家、法家、儒家三家思想，在内政、军事上都有极高的成就。在楚国时，曾主持“吴起变法”。后因变法得罪贵族，遭其杀害。唐肃宗时位列武成王庙内，被称为武庙十哲。宋徽宗时被追尊为广宗伯，为武庙七十二将之一。"]],
                    "ex_zouji": ["male", "ex_qi", 3, ["ex_fengjian", "ex_chanxian"], ["des:邹忌，生卒年不详，战国时代齐国人。《史记》亦作驺忌，田齐桓公时以为重臣，齐威王时为相，封于下邳（今江苏邳县西南），号成侯。后又事齐宣王。前360年前后，齐威王起用邹忌实行改革，“谨修法律而督奸吏”，国力大增。"]],
                    "ex_sunbin": ["male", "ex_qi", 3, ["ex_bingdao", "ex_canbin"], ["des:孙膑（生卒年不详），其本名孙伯灵（山东孙氏族谱可查），是中国战国时期军事家，华夏族，山东鄄城人。出生于阿、鄄之间（今山东省菏泽市鄄城县北），是孙武的后代。  孙膑曾与庞涓为同窗，因受庞涓迫害遭受膑刑，身体残疾，后在齐国使者的帮助下投奔齐国，被齐威王任命为军师，辅佐齐国大将田忌两次击败庞涓，取得了桂陵之战和马陵之战的胜利，奠定了齐国的霸业。"]],
                    "ex_xiangyan": ["male", "ex_chu", 4, ["ex_pojun", "ex_rubi"], ["des:项燕（？—前223年），下相（今江苏宿迁人）人，项燕家族世代为楚国将领，受封于项，后用为姓氏。  公元前224年，秦王倾全国兵力，以王翦为将，率六十万大军大举攻楚，楚国危亡在即。王翦攻取楚国陈以南至平舆之间的地域。楚国则倾一国兵力迎击秦军，以项燕为将，准备与秦军决一死战。王翦因势而变，采取坚壁固守的方针，避其锋芒。楚军多次挑战，秦军始终不出。两军相持日久，楚军以为秦军将长期驻守新占领土，于是撤军东归。王翦伺机起兵追击，令勇壮军士为先锋，突袭楚军。楚军猝不及防，仓促应战，结果大败，项燕在兵败之下自杀。秦军乘胜攻占了楚国大片地域。"]],
                    "ex_linxiangru": ["male", "ex_zhao", 3, ["ex_wanbi", "ex_qianren"], ["des:蔺相如（生卒年不详），战国时期赵国著名的政治家、外交家。他生平最重要的事迹有完璧归赵、渑池之会与负荆请罪这三个事件。  蔺相如原为宦者令舍人。赵惠文王时，秦昭王写信给赵王，愿以十五个城池换取“和氏璧”。蔺相如奉命带“和氏璧”来到秦国，据理力争，机智周旋，终于完璧归赵。公元前279年，秦王与赵王相会于渑池（今河南渑池西），他随侍赵惠文王，当面斥责强大的秦国，不辱国体，使赵王没有受到屈辱，因其功，任为上卿，居官于廉颇之上。廉颇居功自恃，不服相如，耻居其下，并扬言要羞辱相如。蔺相如为保持将相和睦，不使外敌有隙可乘，始终回避忍让。蔺相如以国家利益为重、善自谦抑的精神感动了廉颇，于是亲自到蔺相如府上负荆请罪，二人成为刎颈之交。"]],
                    "ex_lianpo": ["male", "ex_zhao", 4, ["ex_gushou", "ex_laoyi"], ["des:廉颇，生卒年不详，嬴姓，廉氏，名颇，山西太原（一说山西运城，山东德州）人。战国末期赵国的名将，与白起、王翦、李牧并称“战国四大名将”。曾率兵讨伐齐国，取得大胜，夺取了晋阳，赵王封他为上卿。廉颇因为勇猛果敢而闻名于诸侯各国。长平之战前期，他以固守的方式成功抵御了秦国军队。长平之战后，又击退了燕国的入侵，斩杀燕国的栗腹，并令对方割五城求和。公元前251年，他战胜燕军，任以为相国，封为信平君。至赵悼襄王时，由于不得志，他先后投奔魏国大梁和楚国，奔魏居大梁，后老死于楚，葬于寿春。"]],
                    "ex_zhaoyong": ["male", "ex_zhao", 4, ["ex_hufu", "ex_qishe"], ["des:赵雍（约公元前340年—前295年），即赵武灵王，嬴姓，赵国人，赵氏，名雍，赵肃侯之子，战国中后期赵国君主，政治家、改革家。生于赵国首都邯郸。  赵武灵王即位时，赵国国力不强，受中原大国欺侮。林胡、楼烦等游牧民族也不时骚扰，邻境较小的中山国也时常进犯。赵武灵王二十四年（前302年）颁布命令，推行的“胡服骑射”政策，改革军事装备和作战方法，赵国因而得以强盛。赵雍率将士攻击匈奴，占领今内蒙古南部黄河两岸之地，建立云中、九原两郡，又在阴山筑赵长城以抵御胡人。前296年吞并中山国。前314年，燕国发生子之之乱，国都被齐国、中山国攻破，赵武灵王扶植燕昭王回国即位。  赵雍晚年传位于子赵惠文王，自号为“主父”，公元前295年的沙丘宫变中被围困活活饿死于沙丘宫（在今河北广宗县），谥号为武灵王，赵武灵王墓位于今山西省大同市灵丘县。"]],
                    "ex_zhaosheng": ["male", "ex_zhao", 3, ["ex_nashi"], ["des:赵胜（约前308年-前251年），战国四公子之一，赵国贵族。赵武灵王之子，赵惠文王之弟。因贤能而闻名。刻于东武（今山东武城），号平原君。  他礼贤下士，门下食客至数千人，和朋友关系处理的很好。但不注意礼貌对待平民，后在一名门客的建议下和平民搞好了关系，威名大震。  赵胜初为赵惠文王之相，赵惠文王死后，又为赵孝成王之相。赵孝成王七年（前259），长平之战后，秦军进围赵都邯郸（今属河北邯郸），形势十分危急。赵胜尽散家财，发动士兵，坚守城池，长达三年之久。赵王派赵胜向魏和楚求援。九年，食客毛遂自告奋勇，同赵胜去楚国求援，说服了楚王，派春申君率军救赵。此即“毛遂自荐”。援军到来之前，邯郸城内兵困粮尽，赵胜尽散家财，发动士兵坚守城池。直到楚军和魏信陵君援兵赶到，解邯郸之围。"]],
                    "ex_limu": ["male", "ex_zhao", 4, ["ex_quehu", "ex_yuqin"], ["des:李牧（？－公元前229年），嬴姓，李氏，名牧，赵国柏仁（今河北邢台）人，战国时期的赵国军事家，与白起、王翦、廉颇并称“战国四大名将”。战国末期，李牧是赵国赖以支撑危局的唯一良将，素有“李牧死，赵国亡”之称。   李牧生平事迹大致可划分为两个阶段，先是在赵国北部边境，抗击匈奴；后以抵御秦国为主，因在宜安之战重创秦军，得到武安君的封号。公元前229年，赵王迁中了秦国的离间计，听信谗言夺取了李牧的兵权，不久后将李牧杀害。  李牧是战国末年东方六国最杰出的将领。深得士兵和人民的爱戴，有着崇高的威望。在一系列的作战中，他屡次重创敌军而未尝败，显示了高超的军事指挥艺术。尤其是赵破匈奴之战和肥之战，前者是中国战争史中以步兵大兵团全歼骑兵大兵团的典型战例，后者则是围歼战的范例。他的无辜被害，使赵国自毁长城，令后人无不扼腕叹恨。"]],
                    "ex_suqin": ["male", "ex_zhao", 3, ["ex_hezong", "ex_guoxiang"], ["des:苏秦（？—前284年），字季子，雒阳（今河南洛阳）人，战国时期著名的纵横家、外交家和谋略家。  苏秦与张仪同出自鬼谷子门下，跟随鬼谷子学习纵横之术。学成后，外出游历多年，潦倒而归。随后刻苦攻读《阴符》，一年后游说列国，被燕文公赏识，出使赵国。苏秦到赵国后，提出合纵六国以抗秦的战略思想，并最终组建合纵联盟，任“从约长”，兼佩六国相印，使秦十五年不敢出函谷关。联盟解散后，齐国攻打燕国，苏秦说齐归还燕国城池。后自燕至齐，从事反间活动，被齐国任为客卿，齐国众大夫因争宠派人刺杀，苏秦死前献策诛杀了刺客。  《汉书·艺文志》纵横家有《苏子》31篇，早佚。帛书《战国纵横家书》存有其游说辞及书信十六篇，其中十一篇不见于现存传世古籍。"]],
                    "ex_tianji": ["male", "ex_qi", 4, ["ex_fengbin", "ex_jianzao"], ["des:田忌，生卒年不详，妫姓，田氏（亦作陈氏），名忌，字期，又曰期思，封于徐州（今山东滕州南），故又称徐州子期。战国时期齐国名将。  约为公元前340年，孙膑逃亡到齐国时，田忌赏识孙膑的才能，收为门客。在一次赛马时，孙膑向田忌提出了以下马对上马，以上马对中马，以中马对下马的田忌赛马法。  公元前354年，发生桂陵之战，魏国攻打赵国，齐国派兵相助，田忌为主将，孙膑为参谋，结果孙膑以“围魏救赵”的兵法大胜。  公元前341年，发生马陵之战，魏国攻打韩国，齐国派兵相助，仍由田忌为主将，孙膑为参谋，孙膑仍进军魏都大梁，用“减灶之计”，让魏军大将庞涓轻敌深入，结果庞涓被杀，齐国大胜。同年，被齐相邹忌用反间计陷害，田忌无法澄清，逃亡楚国。直到齐宣王即位，方才重回齐国。"]],
                    "ex_yueyi": ["male", "ex_yan", 4, ["ex_lianzhan", "ex_lianke"], ["des:乐毅（yuè yì），生卒年不详，子姓，乐氏，名毅，字永霸。中山灵寿人，战国后期杰出的军事家，魏将乐羊后裔，拜燕上将军，受封昌国君，辅佐燕昭王振兴燕国。  公元前284年，他统帅燕国等五国联军攻打齐国，连下70余城，创造了中国古代战争史上以弱胜强的著名战例，报了强齐伐燕之仇。后因受燕惠王猜忌，投奔赵国，被封于观津，号为望诸君。"]],
                    "ex_weiwuji": ["male", "ex_wei", 3, ["ex_zhenxing", "ex_jiuse"], ["des:魏无忌（？—前243年），即信陵君，魏国公子，与春申君黄歇、孟尝君田文、平原君赵胜并称为“战国四公子”。是战国时期魏国著名的军事家、政治家，魏昭王少子、魏安釐王的异母弟。公元前276年，被封于信陵（河南宁陵县），[1]所以后世皆称其为信陵君。[1] 魏无忌处于魏国走向衰落之时，他效仿孟尝君田文、平原君赵胜的辅政方法，延揽食客，养士数千人，自成势力。魏无忌礼贤下士、急人之困，曾在军事上两度击败秦军，分别挽救了赵国和魏国危局。但屡遭魏安釐王猜忌而未能予以重任。前243年，魏无忌因伤于酒色而死。十八年后，魏国为秦所灭。著有《魏公子兵法》。"]],
                    "ex_pangjuan": ["male", "ex_wei", 4, ["ex_kuangjuan", "ex_canxian"], ["des:庞涓（？—前341年），战国初期魏国名将。相传与孙膑同拜于隐士鬼谷子门下，因嫉妒孙膑的才能，恐其贤于己，因而设计把他的膝盖骨刮去。  魏惠王二十八年（前342年），魏国进攻韩国，次年齐救韩，采用孙膑策略，直趋魏都大梁，旋即退兵，诱使庞涓兼程追击，在马陵（今河南范县西南）中伏大败，涓智穷，大叹“遂叫竖子成名”，自刎而死（一说被乱箭射死），史称马陵之战。"]],
                    "ex_tiandan": ["male", "ex_qi", 4, ["ex_huoniu", "ex_huitian3"], ["des:田单（tián dān）生卒年不详，妫姓，田氏，名单，临淄人，战国时田齐宗室远房的亲属，任齐都临淄的市掾（管理市场的小官）。齐国危亡之际，田单坚守即墨，以火牛阵击破燕军，收复七十余城，因功被任为相国，并得到安平君的封号。后来到赵国作将相，死后葬于安平城内。"]],
                },
                translate: {
                    "ex_qin": "秦",
                    "ex_qinColor": "#000000",
                    "ex_yan": "燕",
                    "ex_yanColor": "#007FFF",
                    "ex_chu": "楚",
                    "ex_chuColor": "#A67D3D",
                    "ex_qi": "齐",
                    "ex_qiColor": "#871F78",
                    "ex_zhao": "赵",
                    "ex_zhaoColor": "#42426F",
                    "ex_han": "韩",
                    "ex_hanColor": "#32CD32",
                    "ex_wei": "魏",
                    "ex_weiColor": "#FF0000",
                    "ex_baiqi": "白起",
                    "ex_lvbuwei": "吕不韦",
                    "ex_yingzheng": "嬴政",
                    "ex_shangyang": "商鞅",
                    "ex_zhangyi": "张仪",
                    "ex_simacuo": "司马错",
                    "ex_wangjian": "王翦",
                    "ex_mengtian": "蒙恬",
                    "ex_lisi": "李斯",
                    "ex_fanju": "范雎",
                    "ex_huangxie": "黄歇",
                    "ex_quyuan": "屈原",
                    "ex_wuqi": "吴起",
                    "ex_zouji": "邹忌",
                    "ex_sunbin": "孙膑",
                    "ex_xiangyan": "项燕",
                    "ex_linxiangru": "蔺相如",
                    "ex_lianpo": "廉颇",
                    "ex_zhaoyong": "赵雍",
                    "ex_zhaosheng": "赵胜",
                    "ex_limu": "李牧",
                    "ex_suqin": "苏秦",
                    "ex_tianji": "田忌",
                    "ex_yueyi": "乐毅",
                    "ex_weiwuji": "魏无忌",
                    "ex_pangjuan": "庞涓",
                    "ex_tiandan": "田单",
                },
            },
            card: {
                card: {
                },
                translate: {
                },
                list: [],
            },
            skill: {
                skill: {
                    "ex_kengsha": {
                        trigger: {
                            source: "dying",
                        },
                        forced: true,
                        priority: 20,
                        filter: function (event, player) {
                            return event.player != player && event.player.hp <= 0;
                        },
                        content: function () {
                            trigger.player.die()._triggered = null;
                        },
                    },
                    "ex_xuetu": {
                        trigger: {
                            global: "phaseEnd",
                        },
                        check: function (event, player) {
                            return ai.get.attitude(player, event.player) <= 0;
                        },
                        filter: function (event, player) {
                            return event.player && event.player.isAlive() && event.player != player;
                        },
                        content: function () {
                            "step 0"
                            player.draw();
                            "step 1"
                            player.useCard({ name: 'sha' }, trigger.player);
                            var chat = ['远绝河山而争人国都', '宁伏受重株而死,不忍为辱军之将'].randomGet()
                            player.say(chat);
                            "step 2"
                            player.skip('phaseDraw');
                            player.skip('phaseUse');
                        },
                        ai: {
                            threaten: 1.5,
                            expose: 0.1,
                        },
                        group: "ex_xuetu_a",
                        subSkill: {
                            a: {
                                trigger: {
                                    global: "damageEnd",
                                },
                                check: function (event, player) {
                                    return ai.get.attitude(player, event.source) <= 0;
                                },
                                filter: function (event, player) {
                                    return event.source && event.source.isAlive() && event.source != player;
                                },
                                content: function () {
                                    "step 0"
                                    player.draw();
                                    "step 1"
                                    player.useCard({ name: 'sha' }, trigger.source);
                                    var chat = ['远绝河山而争人国都', '宁伏受重株而死,不忍为辱军之将'].randomGet()
                                    player.say(chat);
                                    "step 2"
                                    player.skip('phaseDraw');
                                    player.skip('phaseUse');
                                },
                                ai: {
                                    threaten: 1.5,
                                    expose: 0.1,
                                },
                            },
                        },
                    },
                    "ex_qihuo": {
                        mod: {
                            maxHandcard: function (player, num) {
                                if (player.hp < player.maxHp) return num + player.maxHp - player.hp;
                            },
                        },
                        enable: "chooseToUse",
                        filterCard: function (card) {
                            return get.suit(card) == 'spade';
                        },
                        viewAsFilter: function (player) {
                            return player.num('h', { suit: 'spade' }) > 0;
                        },
                        viewAs: {
                            name: "wuxie",
                            suit: "spade",
                            number: 7,
                            cards: [{ "node": { "image": {}, "info": {}, "name": {}, "name2": {}, "background": {}, "intro": {}, "range": {} }, "storage": { "uncheck": [] }, "suit": "spade", "number": 7, "name": "sha", "_transform": "translateX(336px)", "clone": { "name": "sha", "suit": "spade", "number": 7, "node": { "name": {}, "info": {}, "intro": {}, "background": {}, "image": {} }, "_transitionEnded": true, "timeout": 531 }, "timeout": 506, "original": "h" }],
                        },
                        prompt: "将一张黑桃手牌当无懈可击使用",
                        check: function (card) { return 8 - ai.get.value(card) },
                        threaten: 1.2,
                        ai: {
                            basic: {
                                useful: [6, 4],
                                value: [6, 4],
                            },
                            result: {
                                player: 1,
                            },
                            expose: 0.2,
                        },
                        group: ["ex_qihuo_a", "ex_qihuo_b", "ex_qihuo_c"],
                        subSkill: {
                            c: {
                                trigger: {
                                    player: ["phaseEnd", "damageEnd"],
                                },
                                frequent: true,
                                unique: true,
                                content: function () {
                                    "step 0"
                                    player.judge(function (card) {
                                        return get.color(card) == 'black' ? 1 : 0;
                                    });
                                    "step 1"
                                    if (result.bool) {
                                        player.chooseTarget(true, '选择一个目标令其受到一点伤害', function (card, player, target) {
                                            return player != target;
                                        }).ai = function (target) {
                                            return Math.max(1, 9 - target.hp);
                                        }
                                    }
                                    else {
                                        event.finish();
                                    }
                                    "step 2"
                                    if (result.targets.length) {
                                        player.line(result.targets);
                                        result.targets[0].damage();
                                        player.recover();
                                        var chat = ['善学者，假人之长以补其短', '此奇货可居也', '至长反短，至短反长', '平出于公，公出于道'].randomGet()
                                        player.say(chat);
                                    }
                                },
                                ai: {
                                    effect: {
                                        target: function (card) {
                                            if (get.tag(card, 'loseCard')) {
                                                return [0.5, 1];
                                            }
                                        },
                                    },
                                },
                            },
                            a: {
                                trigger: {
                                    player: "phaseBefore",
                                },
                                forced: true,
                                content: function () {
                                    player.skip('phaseUse');
                                    player.skip('phaseDraw');
                                },
                            },
                            b: {
                                trigger: {
                                    global: "useCard",
                                },
                                forced: true,
                                filter: function (event, player) {
                                    return get.type(event.card, 'basic') == 'basic' && event.player != player;
                                },
                                content: function () {
                                    player.gain(trigger.cards)
                                    player.draw();
                                    var chat = ['善学者，假人之长以补其短', '此奇货可居也', '至长反短，至短反长', '平出于公，公出于道'].randomGet()
                                    player.say(chat);
                                },
                            },
                        },
                    },
                    "ex_tunbing": {
                        trigger: {
                            source: "damageEnd",
                        },
                        direct: true,
                        filter: function (event, player) {
                            return (event.player && event.player.isAlive() && event.player.num('he') && event.player != player);
                        },
                        content: function () {
                            player.gainPlayerCard(get.prompt('ex_tunbing', trigger.player), trigger.player, ai.get.buttonValue, 'he').set('logSkill', ['ex_tunbing', trigger.player]);
                            var chat = ['方圆百里之内，无论妇幼老少，猪犬牛羊，杀而焚之，化作焦土，万年寸草不生'].randomGet()
                            player.say(chat);
                        },
                        ai: {
                            effect: {
                                target: function (card, player, target) {
                                    if (player.num('he') > 1 && get.tag(card, 'damage')) {
                                        if (player.hasSkillTag('jueqing')) return [1, -1.5];
                                        if (ai.get.attitude(target, player) < 0) return [1, 1];
                                    }
                                },
                            },
                        },
                    },
                    "ex_zulong": {
                        trigger: {
                            target: "useCardToBefore",
                        },
                        popup: false,
                        direct: true,
                        filter: function (event, player) {
                            if (event.addedTargets) return false;
                            // return event.card&&get.color(event.card)=='red'&&event.player!=player;
                            return event.targets.length == 1 && event.player != player && player.countCards('h') >= 2;
                        },
                        content: function () {
                            "step 0"
                            var next = player.chooseToDiscard(get.prompt('ex_zulong', trigger.player), 2);
                            next.ai = function (card) {
                                if (get.effect(player, trigger.card) < 0) {
                                    if (card.name == 'liuxinghuoyu') return 7 - get.value(card);
                                    return 5 - get.value(card);
                                }
                                return 0;
                            };
                            next.prompt2 = '反弹' + get.translation(trigger.player) + '的' + get.translation(trigger.card);
                            next.logSkill = ['ex_zulong', trigger.player];
                            "step 1"
                            if (result.bool) {
                                // player.discard(result.cards);
                                trigger.target = trigger.player;
                                trigger.player = player;
                                trigger.untrigger();
                                player.gain(trigger.cards);
                                trigger.trigger('useCardToBefore');
                                var chat = ['朕为始皇帝。后世以计数，二世三世至于万世，传之无穷!'].randomGet()
                                player.say(chat);
                            }
                            // "step 2"
                            // if(result.bool){
                            //     trigger.target=result.targets[0];
                            //     trigger.untrigger;
                            //     trigger.trigger('shaBefore');
                            //     game.delay();
                            // }
                        },
                        ai: {
                            threaten: function (player, target) {
                                if (target.countCards('h') <= 2) {
                                    return 2;
                                }
                                return 2 / (target.countCards('h') - 1);
                            },
                        },
                        mod: {
                            maxHandcard: function (player, num) {
                                return num = 5;
                            },
                        },
                        group: ["ex_zulong_a", "ex_zulong_b"],
                        subSkill: {
                            b: {
                                trigger: {
                                    global: "useCardToBefore",
                                },
                                forced: true,
                                usable: 1,
                                filter: function (event, player) {
                                    return event.player != player && event.target == event.player && event.targets.length == 1;
                                },
                                content: function () {
                                    if (player.hp <= 2) {
                                        player.draw();
                                    }
                                    player.gain(game.createCard(trigger.card), 'gain2');
                                },
                            },
                            a: {
                                trigger: {
                                    player: "phaseBegin",
                                },
                                forced: true,
                                filter: function (event, player) {
                                    return player.hp <= 2;
                                },
                                content: function () {
                                    player.skip('phaseJudge');
                                },
                            },
                        },
                    },
                    "ex_bianfa": {
                        trigger: {
                            global: "phaseDrawBegin",
                        },
                        forced: true,
                        content: function () {
                            trigger.num = 0;
                        },
                        group: ["ex_bianfa_a", "ex_bianfa_b"],
                        subSkill: {
                            b: {
                                trigger: {
                                    global: "damageEnd",
                                },
                                forced: true,
                                filter: function (event, player) {
                                    return event.source && event.source.isIn();
                                },
                                content: function () {
                                    "step 0"
                                    trigger.source.draw();
                                    player.draw();
                                    var chat = ['圣王者不贵义而贵法，法必明，令必行，则已矣', '治世不一道，便国不法古', '疑行无成，疑事无功'].randomGet()
                                    player.say(chat);
                                    "step 1"
                                    if (player.countCards('h') > 5) {
                                        player.chooseToDiscard(player.countCards('h') - 5, 'he', true);
                                    }
                                },
                            },
                            a: {
                                trigger: {
                                    global: "phaseEnd",
                                },
                                forced: true,
                                content: function () {
                                    trigger.player.draw(2);
                                },
                            },
                        },
                    },
                    "ex_lianheng": {
                        global: "ex_lianheng_ai",
                        trigger: {
                            source: "damageBegin",
                        },
                        check: function (event, player) {
                            return event.player && get.damageEffect(event.player, player, player) > 0;
                        },
                        filter: function (event) {
                            return event.player && event.player.isAlive() && event.player.isLinked();
                        },
                        logTarget: "trigger.player",
                        content: function () {
                            'step 0'
                            var target = trigger.player;
                            if (target.countCards('h') == 0) {
                                trigger.num++;
                                if (target.isLinked()) {
                                    target.link();
                                }
                                event.finish();
                            }
                            else {
                                target.chooseControl('discard_card', 'get_damage', function () {
                                    if (get.damageEffect(target, player, target) >= 0) return 'get_damage';
                                    var nh = target.countCards('h');
                                    if (nh <= 3 || target.hp <= 3 || target.hasSkillTag('noh')) return 'discard_card';
                                    return 'get_damage';
                                })
                            }
                            'step 1'
                            var target = trigger.player;
                            if (result.control == 'discard_card') {
                                target.discard(target.getCards('h'));
                                if (target.isLinked()) {
                                    target.link();
                                }
                                trigger.untrigger();
                                trigger.finish();
                            }
                            else {
                                trigger.num++;
                                if (target.isLinked()) {
                                    target.link();
                                }
                            }
                        },
                        ai: {
                            maixie: true,
                            "maixie_hp": true,
                        },
                        group: "ex_lianheng_a",
                        subSkill: {
                            a: {
                                trigger: {
                                    player: "damageBefore",
                                },
                                forced: true,
                                filter: function (event, player) {
                                    return event.source && event.source.isAlive() && event.source != player && event.source.isLinked();
                                },
                                content: function () {
                                    trigger.untrigger();
                                    trigger.finish();
                                    player.recover(trigger.num);
                                    trigger.source.link();
                                },
                                ai: {
                                    threaten: 0.3,
                                },
                            },
                        },
                    },
                    "ex_qiaoshe": {
                        trigger: {
                            player: "phaseBegin",
                        },
                        direct: true,
                        content: function () {
                            "step 0"
                            player.chooseTarget(get.prompt('ex_qiaoshe'), function (card, player, target) {
                                return player != target && target.hp >= player.hp;
                            }).ai = function (target) {
                                return get.damageEffect(target, player, player);
                            }
                            "step 1"
                            if (result.bool) {
                                player.logSkill('ex_qiaoshe', result.targets);
                                result.targets[0].link(true);
                            }
                        },
                    },
                    "ex_wucheng": {
                        enable: "phaseUse",
                        usable: 1,
                        filterCard: true,
                        selectCard: 1,
                        filterTarget: true,
                        selectTarget: 1,
                        content: function () {
                            target.turnOver();
                            player.turnOver();
                            target.damage();
                            target.draw();
                            if (target.num('h') >= player.num('h')) {
                                player.recover();
                            }
                        },
                        check: function (card) {
                            return 6 - ai.get.value(card);
                        },
                        ai: {
                            order: 2,
                            result: {
                                target: function (player, target) {
                                    if (target.isTurnedOver()) {
                                        return 1;
                                    }
                                    return -1;

                                },
                            },
                        },
                    },
                    "ex_wenjiang": {
                        trigger: {
                            player: "turnOverAfter",
                        },
                        forced: true,
                        content: function () {
                            player.draw(2);
                        },
                        ai: {
                            threaten: 1.2,
                        },
                        group: "ex_wenjiang_a",
                        subSkill: {
                            a: {
                                trigger: {
                                    player: "damageEnd",
                                },
                                forced: true,
                                filter: function (event, player) {
                                    return player.isTurnedOver();
                                },
                                content: function () {
                                    player.draw(trigger.num);
                                },
                            },
                        },
                    },
                    "ex_shushou": {
                        trigger: {
                            global: "shaBegin",
                        },
                        forced: true,
                        filter: function (event, player) {
                            return event.player != player;
                        },
                        content: function () {
                            if (trigger.target == player) {
                                player.draw(2);
                                player.chooseToDiscard(1, 'he', true);
                            }
                            if (trigger.target != player) {
                                player.changeHujia();
                            }
                        },
                    },
                    "ex_zhiyi": {
                        trigger: {
                            player: "phaseBegin",
                        },
                        forced: true,
                        filter: function (event, player) {
                            return player.hujia ? true : false;
                        },
                        content: function () {
                            player.draw(player.hujia);
                            player.changeHujia(-player.hujia);
                        },
                        mod: {
                            maxHandcard: function (player, num) {
                                if (player.hp < player.maxHp) return num + player.maxHp - player.hp;
                            },
                        },
                    },
                    "ex_fenshu": {
                        trigger: {
                            global: "useCardToBefore",
                        },
                        popup: false,
                        direct: true,
                        filter: function (event, player) {
                            if (event.addedTargets) return false;
                            // return event.card&&get.color(event.card)=='red'&&event.player!=player;
                            return event.targets.length == 1 && event.player != player && event.target != event.player && player.countCards('h') >= 1 && get.type(event.card, 'equip') != 'equip';
                        },
                        content: function () {
                            "step 0"
                            var next = player.chooseToDiscard(get.prompt('ex_fenshu', trigger.player), 1);
                            next.ai = function (card) {
                                if (ai.get.effect(player, trigger.card) < 0) {
                                    if (card.name == 'liuxinghuoyu') return 7 - ai.get.value(card);
                                    return 5 - ai.get.value(card);
                                }
                                return 0;
                            };
                            next.prompt2 = '更改' + get.translation(trigger.player) + '的' + get.translation(trigger.card);
                            next.logSkill = ['ex_fenshu', trigger.player];
                            "step 1"
                            if (result.bool) {
                                // player.discard(result.cards);
                                trigger.target = trigger.player;
                                trigger.player = player;
                                trigger.untrigger();
                                trigger.trigger('useCardToBefore');
                            }
                            // "step 2"
                            // if(result.bool){
                            //     trigger.target=result.targets[0];
                            //     trigger.untrigger;
                            //     trigger.trigger('shaBefore');
                            //     game.delay();
                            // }
                        },
                        ai: {
                            threaten: function (player, target) {
                                if (target.countCards('h') <= 1) {
                                    return 2;
                                }
                                return 2 / (target.countCards('h') - 1);
                            },
                        },
                    },
                    "ex_fazhi": {
                        trigger: {
                            player: "phaseEnd",
                        },
                        forced: true,
                        filter: function (event, player) {
                            return player.hp < player.maxHp;
                        },
                        content: function () {
                            player.draw(player.maxHp - player.hp);
                        },
                    },
                    "ex_yuanjiao": {
                        trigger: {
                            global: "damageAfter",
                        },
                        direct: true,
                        filter: function (event, player) {
                            return player.hp < player.maxHp;
                        },
                        content: function () {
                            'step 0'
                            player.chooseTarget(get.prompt('ex_yuanjiao'), function (card, player, target) {
                                return target != player;
                            }).ai = function (target) {
                                return ai.get.attitude(player, target);
                            };
                            'step 1'
                            if (result.bool) {
                                player.logSkill('ex_yuanjiao', result.targets);
                                result.targets[0].draw();
                                player.draw();
                            }
                        },
                        ai: {
                            expose: 0.1,
                        },
                    },
                    "ex_jingong": {
                        trigger: {
                            target: "useCardToBefore",
                        },
                        forced: true,
                        filter: function (event, player) {
                            return event.card.name == 'sha';
                        },
                        content: function () {
                            "step 0"
                            var eff = ai.get.effect(player, trigger.card, trigger.player, trigger.player);
                            trigger.player.chooseToDiscard(function (card) {
                                return get.color(card) == 'black';
                            }).set('ai', function (card) {
                                if (_status.event.eff > 0) {
                                    return 10 - ai.get.value(card);
                                }
                                return 0;
                            }).set('eff', eff);
                            "step 1"
                            if (result.bool == false) {
                                trigger.untrigger();
                                trigger.finish();
                                player.draw();
                            }
                        },
                        ai: {
                            effect: {
                                target: function (card, player, target, current) {
                                    if (card.name == 'sha') {
                                        if (_status.event.name == 'ex_jingong') return;
                                        var sr = player.getCards('h', { color: 'black' });
                                        if (sr.length < 2) return 0;
                                        if (player.hasSkill('jiu') || player.hasSkill('tianxianjiu')) return;
                                        if (sr.length <= 3 && player.countCards('h', 'sha') <= 1) {
                                            for (var i = 0; i < sr.length; i++) {
                                                if (sr[i].name != 'sha' && ai.get.value(sr[i]) < 7) {
                                                    return [1, 0, 1, -0.5];
                                                }
                                            }
                                            return 0;
                                        }
                                        return [1, 0, 1, -0.5];
                                    }
                                },
                            },
                        },
                    },
                    "ex_zhaoxian": {
                        forced: true,
                        trigger: {
                            global: "gameDrawAfter",
                            player: "dying",
                        },
                        direct: true,
                        init: function (player) {
                            player.storage.ex_zhaoxian = [];
                        },
                        intro: {
                            content: "characters",
                        },
                        filter: function (event, player) {
                            return player.maxHp >= 3;
                        },
                        content: function () {
                            'step 0'
                            player.logSkill('ex_zhaoxian');
                            var list = [];
                            var list2 = [];
                            var players = game.players.concat(game.dead);
                            for (var i = 0; i < players.length; i++) {
                                list2.add(players[i].name);
                                list2.add(players[i].name1);
                                list2.add(players[i].name2);
                            }
                            for (var i in lib.character) {
                                if (lib.character[i][4].contains('minskin')) continue;
                                if (player.storage.ex_zhaoxian.contains(i)) continue;
                                if (list2.contains(i)) continue;
                                list.push(i);
                            }
                            var name = list.randomGet();
                            player.storage.ex_zhaoxian.push(name);
                            player.markSkill('ex_zhaoxian');
                            var skills = lib.character[name][3];
                            for (var i = 0; i < skills.length; i++) {
                                player.addSkill(skills[i]);
                            }
                            event.dialog = ui.create.dialog('<div class="text center">' + get.translation(player) + '发动了【招贤】', [[name], 'character']);
                            game.delay(2);
                            'step 1'
                            event.dialog.close();
                            'step 2'
                            if (player.hp <= 0) {
                                player.recover(1 - player.hp);
                                player.loseMaxHp();
                            }
                        },
                    },
                    "ex_xiangcao": {
                        trigger: {
                            player: "damageEnd",
                        },
                        forced: true,
                        filter: function (event, player) {
                            return player.hp < player.maxHp;
                        },
                        content: function () {
                            'step 0'
                            player.judge(function (card) {
                                return get.color(card) == 'red' ? -1 : 1;
                            });
                            'step 1'
                            if (result.bool) {
                                player.recover();
                                player.draw();
                            }
                        },
                        ai: {
                            threaten: 0.8,
                        },
                    },
                    "ex_xunguo": {
                        trigger: {
                            player: "dying",
                        },
                        forced: true,
                        content: function () {
                            "step 0"
                            var players = get.players(player);
                            players.remove(player);
                            event.players = players;
                            "step 1"
                            if (event.players.length) {
                                var current = event.players.shift();
                                var hs = current.getCards('h');
                                if (hs.length) {
                                    current.lose(hs)._triggered = null;
                                    current.$throw(hs);
                                }
                                else {
                                    current.loseMaxHp();
                                    if (player.hp <= 0) {
                                        player.loseMaxHp();
                                        player.recover(1 - player.hp);
                                    }
                                }
                                game.delay(0.5);
                                event.redo();
                            }
                        },
                    },
                    "ex_poshu": {
                        skillAnimation: "legend",
                        trigger: {
                            source: "damageEnd",
                            player: ["loseHpEnd", "damageEnd"],
                        },
                        derivation: ["ex_fawei", "ex_gongchu"],
                        forced: true,
                        filter: function (event, player) {
                            return !player.storage.ex_poshu;
                        },
                        content: function () {
                            'step 0'
                            player.storage.ex_poshu = true;
                            'step 1'
                            player.loseMaxHp();
                            player.recover();
                            player.draw(2);
                            player.addSkill('ex_gongchu');
                            player.addSkill('ex_fawei');
                        },
                    },
                    "ex_fawei": {
                        trigger: {
                            target: "useCardToBefore",
                        },
                        forced: true,
                        filter: function (event, player) {
                            return event.player != player;
                        },
                        content: function () {
                            "step 0"
                            player.draw();
                            "step 1"
                            player.chooseToUse('是否使用一张牌？');
                        },
                        ai: {
                            effect: {
                                target: function (card, player, target) {
                                    if (get.tag(card, 'damage') && _status.currentPhase != target) {
                                        if (player.hasSkillTag('jueqing')) return [1, -1.5];
                                        return [1, 0.5];
                                    }
                                },
                            },
                        },
                        group: "ex_fawei_a",
                        subSkill: {
                            a: {
                                trigger: {
                                    global: "phaseBegin",
                                },
                                forced: true,
                                content: function () {
                                    "step 0"
                                    player.draw();
                                    "step 1"
                                    player.chooseToUse('是否使用一张牌？');
                                    "step 2"
                                    player.skip('phaseUse');
                                },
                                ai: {
                                    effect: {
                                        target: function (card, player, target) {
                                            if (get.tag(card, 'damage') && _status.currentPhase != target) {
                                                if (player.hasSkillTag('jueqing')) return [1, -1.5];
                                                return [1, 0.5];
                                            }
                                        },
                                    },
                                },
                            },
                        },
                    },
                    "ex_gongchu": {
                        trigger: {
                            source: "damageEnd",
                        },
                        filter: function (event, player) {
                            return (event.player && event.player.countCards('he'));
                        },
                        check: function (event, player) {
                            return ai.get.attitude(player, event.player) < 0;
                        },
                        content: function () {
                            player.draw();
                            trigger.player.chooseToDiscard(1, 'he', true);
                        },
                        logTarget: "trigger.player",
                        ai: {
                            expose: 0.3,
                            result: {
                                target: function (card, player, target) {
                                    if (player.countCards('he') > 0 && get.tag(card, 'damage')) {
                                        if (player.hasSkillTag('jueqing')) return [1, -1];
                                        if (ai.get.attitude(target, player) < 0) return [1, 0, 0, -1.5];
                                    }
                                },
                            },
                        },
                    },
                    "ex_qiru": {
                        skillAnimation: true,
                        derivation: ["ex_congbing", "ex_baijiang"],
                        trigger: {
                            player: "damageEnd",
                        },
                        filter: function (event, player) {
                            return player.hp <= 2 && !player.storage.ex_qiru;
                        },
                        forced: true,
                        content: function () {
                            player.gainMaxHp();
                            player.draw(2);
                            player.changeHujia();
                            player.addSkill('ex_congbing');
                            player.addSkill('ex_baijiang');
                            player.storage.ex_qiru = true;
                            player.awakenSkill('ex_qiru');
                        },
                    },
                    "ex_congbing": {
                        trigger: {
                            player: "shaEnd",
                        },
                        forced: true,
                        content: function () {
                            player.draw();
                        },
                    },
                    "ex_baijiang": {
                        trigger: {
                            player: "phaseBegin",
                        },
                        mark: true,
                        skillAnimation: true,
                        init: function (player) {
                            player.storage.ex_baijiang = false;
                        },
                        check: function (event, player) {
                            if (player.hasJudge('lebu')) return false;
                            return true;
                        },
                        filter: function (event, player) {
                            if (player.storage.ex_baijiang) return false;
                            return true;
                        },
                        content: function () {
                            player.skip('phaseDraw');
                            player.addTempSkill('ex_baijiang2', 'phaseAfter');
                            player.awakenSkill('ex_baijiang');
                            player.storage.ex_baijiang = true;
                            var cards = [];
                            for (var i = 0; i < 1 + player.maxHp - player.hp; i++) {
                                cards.push(game.createCard('sha'));
                            }
                            player.gain(cards, 'gain2');
                        },
                        ai: {
                            threaten: function (player, target) {
                                if (target.hp == 1) return 3;
                                return 1;
                            },
                            effect: {
                                target: function (card, player, target) {
                                    if (!target.hasFriend()) return;
                                    if (get.tag(card, 'damage') == 1 && target.hp == 2 && target.countCards('he') &&
                                        !target.isTurnedOver() && _status.currentPhase != target) {
                                        if (get.distance(_status.currentPhase, target, 'absolute') <= 2) return [0.5, 1];
                                        return 0.8;
                                    }
                                },
                            },
                        },
                        intro: {
                            content: "limited",
                        },
                    },
                    "ex_baijiang2": {
                        mod: {
                            cardUsable: function (card) {
                                if (get.info(card) && get.info(card).forceUsable) return;
                                return Infinity;
                            },
                            targetInRange: function () {
                                if (!get.is.altered('ex_baijiang2')) return true;
                            },
                        },
                    },
                    "ex_fengjian": {
                        enable: "phaseUse",
                        filterCard: function (card) {
                            return get.type(card, 'trick') == 'trick';
                        },
                        selectCard: 1,
                        direct: true,
                        content: function () {
                            'step 0'
                            var list = { basic: [], equip: [], trick: [], delay: [] };
                            for (var i = 0; i < lib.inpile.length; i++) {
                                var name = lib.inpile[i];
                                var info = lib.card[name];
                                if (info.autoViewAs || name == 'yuansuhuimie') continue;
                                if (lib.filter.cardEnabled({ name: name }, player)) {
                                    if (!list[info.type]) {
                                        list[info.type] = [];
                                    }
                                    list[info.type].push([get.translation(lib.card[name].type), '', name]);
                                }
                            }
                            list.trick.sort(lib.sort.name);
                            var dialog = ui.create.dialog('讽谏', [list.trick, 'vcard']);
                            // for(var i in list){
                            //     dialog.addText(get.translation(i)+'牌');
                            //     dialog.add([list[i],'vcard']);
                            // }
                            var rand1 = Math.random() < 1 / 3;
                            var rand2 = Math.random() < 0.5;
                            var rand3 = Math.random() < 1 / 3;
                            var rand4 = Math.random() < 1 / 3;
                            player.chooseButton(dialog).ai = function (button) {
                                var name = button.link[2];
                                if (player.hp <= 1) {
                                    switch (name) {
                                        case 'zhiliaobo': return 1;
                                        case 'dunpaigedang': return 0.8;
                                        case 'nanman': return 0.5;
                                        default: return 0;
                                    }
                                }
                                if (rand4 && player.countCards('h') <= 1) {
                                    switch (name) {
                                        case 'zengbin': return 1;
                                        case 'wuzhong': return 0.8;
                                        default: return 0;
                                    }
                                }
                                if (player.hasSkill('qinglonglingzhu')) {
                                    if (rand2) return name == 'chiyuxi' ? 0.8 : 0;
                                    return name == 'jingleishan' ? 0.8 : 0;
                                }
                                if (rand2) return name == 'wanjian' ? 0.8 : 0;
                                return name == 'nanman' ? 0.8 : 0;
                            }
                            'step 1'
                            if (result.bool) {
                                var name = result.links[0][2];
                                var info = lib.card[name];
                                var card = game.createCard(name);
                                if (info.selectTarget == -1) {
                                    var targets = game.filterPlayer(function (current) {
                                        return lib.filter.filterTarget(card, player, current);
                                    });
                                    if (targets.length) {
                                        targets.sort(lib.sort.seat);
                                        player.useCard(card, targets);
                                    }
                                    event.finish();
                                }
                                else if (info.notarget) {
                                    player.useCard(card);
                                }
                                else {
                                    var next = player.chooseTarget('选择' + get.translation(name) + '的目标');
                                    next._get_card = card;
                                    next.filterTarget = lib.filter.filterTarget;
                                    next.ai = get.effect;
                                    if (typeof info.selectTarget == 'function') {
                                        next.selectTarget = info.selectTarget;
                                    }
                                    else {
                                        next.selectTarget = get.select(info.selectTarget);
                                    }
                                    event.card = card;
                                }
                            }
                            else {
                                event.finish();
                            }
                            'step 2'
                            if (result.bool) {
                                player.useCard(event.card, result.targets);
                            }
                        },
                        check: function (card) { return 10 },
                        ai: {
                            threaten: 1.4,
                            order: 9,
                            basic: {
                                order: 7.2,
                                useful: 4,
                                value: 9.2,
                            },
                            result: {
                                player: 10,
                            },
                        },
                        group: "ex_fengjian_a",
                        subSkill: {
                            a: {
                                trigger: {
                                    player: "useCard",
                                },
                                frequent: true,
                                filter: function (event) {
                                    var type = get.type(event.card, 'trick');
                                    return (type == 'trick') && event.cards[0] && event.cards[0] == event.card;
                                },
                                content: function () {
                                    var cards = get.cards();
                                    player.gain(cards, 'gain2');
                                    game.log(player, '获得了', cards);
                                    player.chooseToDiscard(1, 'he', true);
                                },
                                ai: {
                                    threaten: 1.4,
                                    noautowuxie: true,
                                },
                            },
                        },
                    },
                    "ex_chanxian": {
                        trigger: {
                            player: "damageEnd",
                        },
                        check: function (event, player) {
                            var att = get.attitude(player, event.source);
                            var num = event.source.countCards('h');
                            if (att <= 0) return true;
                            if (num > 2) return true;
                            if (num) return att < 4;
                            return false;
                        },
                        filter: function (event, player) {
                            return event.source && event.source != player && event.num > 0 && event.source.isAlive();
                        },
                        content: function () {
                            "step 0"
                            event.num = trigger.num;
                            "step 1"
                            trigger.source.chooseCard('令' + get.translation(player) + '摸两张牌或流失一点体力').set('ai', function (card) {
                                if (get.attitude(_status.event.player, _status.event.getParent().player) > 0) {
                                    return 11 - get.value(card);
                                }
                                else {
                                    return 7 - get.value(card);
                                }
                            });
                            "step 2"
                            if (result.bool) {
                                player.draw(2);
                            }
                            else {
                                trigger.source.loseHp();
                            }
                            if (event.num > 1) {
                                event.num--;
                                event.goto(1);
                            }
                        },
                        ai: {
                            effect: {
                                target: function (card, player, target) {
                                    if (player.hasSkillTag('jueqing')) return [1, -1.5];
                                    if (!target.hasFriend()) return;
                                    if (get.tag(card, 'damage')) return [1, 0, 0, -0.7];
                                },
                            },
                        },
                    },
                    "ex_bingdao": {
                        trigger: {
                            player: "damageEnd",
                        },
                        forced: true,
                        filter: function (event, player) {
                            return event.source && event.source.isIn() && event.source != player && player.hp > 0;
                        },
                        content: function () {
                            "step 0"
                            player.loseMaxHp(player.maxHp - player.hp);
                            player.changeHujia();
                            "step 1"
                            trigger.source.maxHp = player.maxHp;
                            trigger.source.update();
                        },
                    },
                    "ex_canbin_a": {
                        trigger: {
                            global: "dieAfter",
                        },
                        forced: true,
                        filter: function (event, player) {
                            return player.maxHp > 1;
                        },
                        content: function () {
                            player.loseMaxHp();
                            player.draw(2);
                        },
                    },
                    "ex_canbin_b": {
                        trigger: {
                            global: "recoverBefore",
                        },
                        forced: true,
                        filter: function (event, player) {
                            return event.player && event.player.hp <= 0 && event.player != player;
                        },
                        content: function () {
                            player.gainMaxHp();
                            player.recover();
                        },
                    },
                    "ex_canbin": {
                        trigger: {
                            player: "dieBefore",
                        },
                        forced: true,
                        content: function () {
                            "step 0"
                            var players = get.players(player);
                            players.remove(player);
                            event.players = players;
                            "step 1"
                            if (event.players.length) {
                                var current = event.players.shift();
                                if (current.maxHp > 1) {
                                    current.loseMaxHp();
                                }
                                game.delay(0.5);
                                event.redo();
                            }
                        },
                        group: ["ex_canbin_a", "ex_canbin_b"],
                    },
                    "ex_pojun": {
                        enable: ["chooseToUse", "chooseToRespond"],
                        filterCard: function (card) {
                            return get.color(card);
                        },
                        viewAsFilter: function (player) {
                            return player.num('h') > 0;
                        },
                        viewAs: {
                            name: "sha",
                            suit: "spade",
                            number: 5,
                            cards: [{ "node": { "image": {}, "info": {}, "name": {}, "name2": {}, "background": {}, "intro": {}, "range": {} }, "storage": { "uncheck": [] }, "suit": "spade", "number": 5, "name": "sha", "_transform": "translateX(0px)", "clone": { "name": "sha", "suit": "spade", "number": 5, "node": { "name": {}, "info": {}, "intro": {}, "background": {}, "image": {} }, "_transitionEnded": true, "timeout": 946 }, "timeout": 885, "original": "h" }],
                        },
                        prompt: "将一张手牌当杀使用",
                        check: function (card) { return 8 - ai.get.value(card) },
                        threaten: 1.2,
                        ai: {
                            skillTagFilter: function (player, tag, arg) {
                                if (arg != 'use') return false;
                            },
                            respondSha: true,
                            order: function () {
                                return get.order({ name: 'sha' }) + 0.1;
                            },
                            useful: -1,
                            value: -1,
                            basic: {
                                useful: [5, 1],
                                value: [5, 1],
                            },
                            result: {
                                target: function (player, target) {
                                    if (player.hasSkill('jiu') && !target.getEquip('baiyin')) {
                                        if (get.attitude(player, target) > 0) {
                                            return -6;
                                        }
                                        else {
                                            return -3;
                                        }
                                    }
                                    return -1.5;
                                },
                            },
                            tag: {
                                respond: 1,
                                respondShan: 1,
                                damage: function (card) {
                                    if (card.nature == 'poison') return;
                                    return 1;
                                },
                                natureDamage: function (card) {
                                    if (card.nature) return 1;
                                },
                                fireDamage: function (card, nature) {
                                    if (card.nature == 'fire') return 1;
                                },
                                thunderDamage: function (card, nature) {
                                    if (card.nature == 'thunder') return 1;
                                },
                                poisonDamage: function (card, nature) {
                                    if (card.nature == 'poison') return 1;
                                },
                            },
                        },
                    },
                    "ex_rubi": {
                        trigger: {
                            source: "damageAfter",
                        },
                        check: function (event, player) {
                            return get.attitude(player, event.player) <= 0;
                        },
                        filter: function (event) {
                            return event.card && event.card.name == 'sha' && event.parent.name != '_lianhuan' && event.parent.name != '_lianhuan2';
                        },
                        content: function () {
                            player.draw();
                            player.useCard({ name: 'juedou' }, trigger.player);
                        },
                        ai: {
                            threaten: 1.5,
                            expose: 0.1,
                        },
                    },
                    "ex_wanbi": {
                        trigger: {
                            player: "loseEnd",
                        },
                        forced: true,
                        filter: function (event, player) {
                            return _status.currentPhase != player && (player.num('h') < Math.min(4));
                        },
                        content: function () {
                            player.draw(Math.min(4) - player.num('h'));
                        },
                        ai: {
                            threaten: 1.8,
                        },
                    },
                    "ex_qianren": {
                        trigger: {
                            player: ["damageAfter", "loseHpAfter"],
                        },
                        forced: true,
                        content: function () {
                            player.draw()._triggered = null;
                            player.chooseToDiscard(1, 'he', true);
                        },
                    },
                    "ex_gushou": {
                        trigger: {
                            target: "useCardToBefore",
                        },
                        logTarget: "player",
                        check: function (event, player) {
                            if (get.attitude(player, event.player) > 0) {
                                return false;
                            }
                            if (get.tag(event.card, 'respondSha')) {
                                if (player.countCards('h', { name: 'sha' }) == 0) {
                                    return true;
                                }
                            }
                            else if (get.tag(event.card, 'respondShan')) {
                                if (player.countCards('h', { name: 'shan' }) == 0) {
                                    return true;
                                }
                            }
                            else if (get.tag(event.card, 'damage')) {
                                if (player.hp < 2) return true;
                            }
                            else if (event.card.name == 'shunshou' && player.countCards('he') > 2) {
                                return true;
                            }
                            return false;
                        },
                        filter: function (event, player) {
                            return event.player != player && event.card && player.countCards('he');
                        },
                        priority: 15,
                        content: function () {
                            "step 0"
                            player.chooseToDiscard(1, 'he', true);
                            "step 1"
                            trigger.untrigger();
                            trigger.finish();
                        },
                        ai: {
                            expose: 0.2,
                        },
                    },
                    "ex_laoyi": {
                        trigger: {
                            global: "phaseEnd",
                        },
                        forced: true,
                        filter: function (event, player) {
                            return event.player && event.player != player && event.player != player.previous && player.hp < player.maxHp;
                        },
                        content: function () {
                            player.phase();
                        },
                        ai: {
                            threaten: 1.9,
                        },
                    },
                    "ex_qishe": {
                        mod: {
                            globalFrom: function (from, to, distance) {
                                return distance - 1;
                            },
                            globalTo: function (from, to, distance) {
                                return distance + 1;
                            },
                        },
                    },
                    "ex_hufu": {
                        trigger: {
                            player: "phaseBegin",
                        },
                        forced: true,
                        content: function () {
                            player.skip('phaseJudge');
                        },
                        mod: {
                            selectTarget: function (card, player, range) {
                                if (range[1] == -1) return;
                                if (card.name == 'sha') range[1] += 1;
                            },
                            cardUsable: function (card, player, num) {
                                if (card.name == 'sha') return num + 1;
                            },
                        },
                    },
                    "ex_nashi": {
                        trigger: {
                            global: "gameDrawAfter",
                            player: "damageEnd",
                        },
                        forced: true,
                        content: function () {
                            "step 0"
                            player.chooseTarget('选择一名角色随机获得一个技能', true).ai = function (target) {
                                if (player.hp == 1) {
                                    return ai.get.attitude(player, target) >= 3 && player != target;
                                }
                                return ai.get.attitude(player, target) + 10;
                            }

                            "step 1"
                            var skills = [];
                            for (var i in lib.character) {
                                for (var j = 0; j < lib.character[i][3].length; j++) {
                                    var info = lib.skill[lib.character[i][3][j]];
                                    if (info && (info.gainable || !info.unique)) {
                                        skills.add(lib.character[i][3][j]);
                                    }
                                }
                            }
                            var link = skills.randomGet();
                            player.line(result.targets[0], 'green');
                            result.targets[0].addSkill(link);
                            result.targets[0].mark(link, {
                                name: get.translation(link),
                                content: lib.translate[link + '_info']
                            });
                            game.log(result.targets[0], '获得技能', '【' + get.translation(link) + '】');
                        },
                        ai: {
                            expose: 0.2,
                        },
                    },
                    "ex_quehu": {
                        trigger: {
                            player: ["useCard", "respondAfter"],
                        },
                        direct: true,
                        filter: function (event) {
                            return game.countPlayer() > 1 && event.card && event.card.name == 'shan';
                        },
                        content: function () {
                            "step 0"
                            game.delay(0.5);
                            player.chooseCardTarget({
                                prompt: get.prompt('ex_quehu'),
                                filterCard: lib.filter.cardDiscardable,
                                position: 'he',
                                filterTarget: function (card, player, target) {
                                    return target != player && target.hp != 1;
                                },
                                ai1: function (card) {
                                    return 8 - get.value(card);
                                },
                                ai2: function (target) {
                                    return get.damageEffect(target, player, player);
                                }
                            });
                            "step 1"
                            if (result.bool) {
                                player.logSkill('ex_quehu', result.targets);
                                player.discard(result.cards);
                                result.targets[0].damage();
                            }
                        },
                        ai: {
                            expose: 0.3,
                            threaten: 1.6,
                        },
                    },
                    "ex_yuqin": {
                        enable: ["chooseToRespond"],
                        filterCard: function (card) {
                            return get.type(card) == 'basic';
                        },
                        viewAs: {
                            name: "shan",
                            suit: "heart",
                            number: 3,
                        },
                        viewAsFilter: function (player) {
                            if (!player.countCards('h', { type: 'basic' })) return false;
                        },
                        prompt: "将一张基本牌当闪打出",
                        check: function () { return 1 },
                        ai: {
                            respondShan: true,
                            skillTagFilter: function (player) {
                                if (!player.countCards('h', { type: 'basic' })) return false;
                            },
                            effect: {
                                target: function (card, player, target, current) {
                                    if (get.tag(card, 'respondShan') && current < 0) return 0.6
                                },
                            },
                            basic: {
                                useful: [7, 2],
                                value: [7, 2],
                            },
                        },
                        group: "ex_yuqin_a",
                        subSkill: {
                            a: {
                                trigger: {
                                    player: "phaseEnd",
                                },
                                frequent: true,
                                filter: function (event, player) {
                                    return get.cardCount(true, player) > 0;
                                },
                                content: function () {
                                    player.draw(get.cardCount(true, player));
                                },
                                ai: {
                                    threaten: 1.3,
                                },
                            },
                        },
                    },
                    "ex_hezong": {
                        trigger: {
                            source: "damageAfter",
                        },
                        forced: true,
                        filter: function (event, player) {
                            return game.hasPlayer(function (current) {
                                return current.isFriendOf(player) && current.isDamaged();
                            });
                        },
                        content: function () {
                            var list = game.filterPlayer(function (current) {
                                return current.isFriendOf(player) && current.isDamaged();
                            });
                            if (list.length) {
                                player.line(list, 'green');
                                game.asyncDraw(list);
                            }
                        },
                        ai: {
                            threaten: 1.4,
                        },
                        group: ["ex_hezong_a", "ex_hezong_b"],
                        subSkill: {
                            b: {
                                trigger: {
                                    player: "linkBegin",
                                },
                                forced: true,
                                filter: function (event, player) {
                                    return !player.isLinked();
                                },
                                content: function () {
                                    trigger.untrigger();
                                    trigger.finish();
                                },
                            },
                            a: {
                                trigger: {
                                    player: "recoverBegin",
                                },
                                forced: true,
                                content: function () {
                                    "step 0"
                                    event.players = get.players(player);
                                    event.players.remove(player);
                                    "step 1"
                                    if (event.players.length) {
                                        event.players.shift().recover();
                                        event.redo();
                                    }
                                },
                            },
                        },
                    },
                    "ex_guoxiang": {
                        trigger: {
                            global: "chooseToRespondBegin",
                        },
                        forced: true,
                        filter: function (event, player) {
                            return event.player.isFriendOf(player) && event.player.isDamaged();
                        },
                        content: function () {
                            trigger.player.draw();
                        },
                        ai: {
                            threaten: 1.3,
                        },
                    },
                    "ex_fengbin": {
                        trigger: {
                            player: "dying",
                        },
                        forced: true,
                        filter: function (event, player) {
                            return player.hp <= 0;
                        },
                        content: function () {
                            "step 0"
                            player.maxHp = 2;
                            player.update();
                            "step 1"
                            player.recover(player.maxHp - player.hp);
                            player.removeSkill('ex_fengbin');

                        },
                        ai: {
                            threaten: 0.8,
                        },
                    },
                    "ex_jianzao": {
                        enable: "phaseUse",
                        usable: 1,
                        position: "he",
                        filterCard: function (card) {
                            return get.color(card) == 'red';
                        },
                        viewAs: {
                            name: "zengbin",
                        },
                        viewAsFilter: function (player) {
                            if (!player.countCards('he', { color: 'red' })) return false;
                        },
                        prompt: "将一张红色手牌当作增兵减灶使用",
                        check: function (card) { return 7 - get.value(card) },
                        ai: {
                            threaten: 1.4,
                            order: 9,
                            basic: {
                                order: 7.2,
                                useful: 4,
                                value: 9.2,
                            },
                            result: {
                                target: 2,
                            },
                            tag: {
                                draw: 2,
                            },
                            useful: 4,
                            value: 10,
                        },
                    },
                    "ex_lianzhan": {
                        trigger: {
                            player: "useCardAfter",
                        },
                        forced: true,
                        content: function () {
                            player.draw();
                        },
                        ai: {
                            threaten: 1.5,
                        },
                    },
                    "ex_lianke": {
                        trigger: {
                            source: "dieAfter",
                        },
                        forced: true,
                        content: function () {
                            player.loseHp();
                            player.draw(2);
                        },
                        ai: {
                            threaten: 1.1,
                        },
                    },
                    "ex_kuangjuan": {
                        trigger: {
                            source: "damageBegin",
                        },
                        forced: true,
                        content: function () {
                            var num = Math.floor(trigger.player.maxHp * 0.5)
                            if (trigger.player.hp - num <= 0) {
                                trigger.num++
                            }
                        },
                        ai: {
                            threaten: 1.4,
                        },
                    },
                    "ex_zongheng": {
                        trigger: {
                            player: "shaBegin",
                        },
                        forced: true,
                        content: function () {
                            player.judge(function (card) {
                                if (get.color(card) == 'red') {
                                    trigger.directHit = true;
                                }
                                if (get.color(card) == 'black') {
                                    player.addTempSkill('ex_zongheng2', { player: ['useCardToBefore', 'phaseEnd'] });
                                }
                            });
                        },
                        ai: {
                            threaten: 1.5,
                        },
                    },
                    "ex_zongheng2": {
                        trigger: {
                            player: "damageBegin",
                        },
                        forced: true,
                        content: function () {
                            trigger.num++
                        },
                    },
                    "ex_huitian_a": {
                        trigger: {
                            player: "phaseDrawAfter",
                            global: "gameDrawAfter",
                        },
                        priority: -10,
                        forced: true,
                        popup: false,
                        silent: true,
                        content: function () {
                            player.storage.ex_huitian_a = player.hp;
                            game.broadcast(function (player) {
                                player.storage.ex_huitian_a = player.hp;
                            }, player);
                            game.addVideo('storage', player, ['ex_huitian_a', player.storage.ex_huitian_a]);
                        },
                        intro: {
                            content: function (storage, player) {
                                if (player.storage.ex_huitian) return;
                                return '上回合体力：' + storage;
                            },
                        },
                    },
                    "ex_huitian": {
                        trigger: {
                            global: "gameDrawAfter",
                            player: "phaseDrawAfter",
                        },
                        forced: true,
                        filter: function (event, player) {
                            return !player.storage.ex_huitian;
                        },
                        alter: true,
                        intro: {
                            content: function (storage, player) {
                                var str = '';
                                if (player.storage.ex_huitian_h.length) {
                                    if (player.isUnderControl(true)) {
                                        str += '手牌区：' + get.translation(player.storage.ex_huitian_h);
                                    }
                                    else {
                                        str += '手牌区：' + (player.storage.ex_huitian_h.length) + '张牌';
                                    }
                                }
                                if (player.storage.ex_huitian_e.length) {
                                    if (str.length) str += '、';
                                    if (player.isUnderControl(true)) {
                                        str += '装备区：' + get.translation(player.storage.ex_huitian_e);
                                    }
                                    else {
                                        str += '装备区：' + (player.storage.ex_huitian_e.length) + '张牌';
                                    }
                                }
                                return str;
                            },
                            mark: function (dialog, content, player) {
                                if (player.storage.ex_huitian_h.length) {
                                    if (player.isUnderControl(true)) {
                                        dialog.add('<div class="text center">手牌区</div>');
                                        dialog.addSmall(player.storage.ex_huitian_h);
                                    }
                                    else {
                                        dialog.add('<div class="text center">手牌区：' + player.storage.ex_huitian_h.length + '张牌</div>');
                                    }
                                }
                                if (player.storage.ex_huitian_e.length) {
                                    if (player.isUnderControl(true)) {
                                        dialog.add('<div class="text center">装备区</div>');
                                        dialog.addSmall(player.storage.ex_huitian_e);
                                    }
                                    else {
                                        dialog.add('<div class="text center">装备区：' + player.storage.ex_huitian_e.length + '张牌</div>');
                                    }
                                }
                            },
                        },
                        logTarget: "player",
                        content: function () {
                            "step 0"
                            if (player.storage.ex_huitian_n >= 1) {
                                player.storage.ex_huitian_n--;
                            }
                            "step 1"
                            if (player.storage.ex_huitian_n <= 0) {
                                delete player.storage.ex_huitian_h;
                                delete player.storage.ex_huitian_e;
                                delete player.storage.ex_huitian_n;
                                player.unmarkSkill('ex_huitian');
                            }
                            else {
                                player.addSkill('ex_huitian2');
                            }
                            "step 2"
                            player.storage.ex_huitian_h = player.get('h');
                            player.storage.ex_huitian_e = player.get('e');
                            player.storage.ex_huitian_n = 1;
                            player.syncStorage('ex_huitian_e');
                            player.storage.ex_huitian = trigger.player;
                            player.removeSkill('ex_huitian2');
                            player.markSkill('ex_huitian');
                            "step 3"
                            delete player.storage.ex_huitian;
                        },
                    },
                    "ex_huitian2": {
                        trigger: {
                            player: ["gainBegin", "loseBegin"],
                        },
                        forced: true,
                        popup: false,
                        content: function () {
                            player.removeSkill('ex_huitian2');
                        },
                    },
                    "ex_huitian3": {
                        forced: true,
                        trigger: {
                            player: "dying",
                        },
                        init: function (player) {
                            player.storage.ex_huitian_a = false;
                        },
                        filter: function (event, player) {
                            return player.storage.ex_huitian_h && player.storage.ex_huitian_e &&
                                player.storage.ex_huitian_n > 0 && !player.hasSkill('ex_huitian2');
                        },
                        check: function (event, player) {
                            if (player.hp <= 1) return true;
                            return player.hp < player.storage.ex_huitian_a - 1;
                            var n1 = player.num('he');
                            var n2 = player.storage.ex_huitian_h.length + player.storage.ex_huitian_e.length;
                            if (n1 < n2) return true;
                            if (player.hp == player.maxHp) return false;
                            if (n1 == n2 + 1) return true;
                            if (n2 == n2 + 2 && player.hp <= 1) return true;
                            return false;
                        },
                        video: function (player) {
                            var cards = player.get('he');
                            for (var i = 0; i < cards.length; i++) {
                                cards[i].remove();
                            }
                            for (var i = 0; i < player.storage.ex_huitian_e.length; i++) {
                                player.$equip(player.storage.ex_huitian_e[i]);
                            }
                        },
                        content: function () {
                            "step 0"
                            player.awakenSkill('ex_huitian3');
                            player.recover(player.storage.ex_huitian_a - player.hp);


                            game.addVideo('skill', player, 'ex_huitian3');
                            for (var i = 0; i < player.storage.ex_huitian_h.length; i++) {
                                if (get.position(player.storage.ex_huitian_h[i]) == 's') {
                                    player.storage.ex_huitian_h[i] = game.createCard(player.storage.ex_huitian_h[i]);
                                }
                            }
                            for (var i = 0; i < player.storage.ex_huitian_e.length; i++) {
                                if (get.position(player.storage.ex_huitian_e[i]) == 's') {
                                    player.storage.ex_huitian_e[i] = game.createCard(player.storage.ex_huitian_e[i]);
                                }
                            }
                            player.removeEquipTrigger();
                            var cards = player.get('he');
                            for (var i = 0; i < cards.length; i++) {
                                ui.discardPile.appendChild(cards[i]);
                            }
                            player.directgain(player.storage.ex_huitian_h);
                            for (var i = 0; i < player.storage.ex_huitian_e.length; i++) {
                                player.$equip(player.storage.ex_huitian_e[i]);
                            }

                            player.storage.ex_huitian_n--;
                            if (player.storage.ex_huitian_n <= 0) {
                                delete player.storage.ex_huitian_h;
                                delete player.storage.ex_huitian_e;
                                delete player.storage.ex_huitian_n;
                                player.unmarkSkill('ex_huitian');
                            }
                            else {
                                player.addSkill('ex_huitian2');
                            }
                        },
                        intro: {
                            mark: function (dialog, content, player) {
                                if (player.storage.ex_huitian3) return;
                                if (typeof player.storage.ex_huitian_a != 'number') {
                                    return '上回合体力：无';
                                }
                                return '上回合体力：' + player.storage.ex_huitian_a;
                            },
                            content: "limited",
                        },
                        group: ["ex_huitian_a", "ex_huitian"],
                    },
                    "ex_jiuse": {
                        enable: "chooseToUse",
                        usable: 1,
                        filterCard: function (card) {
                            return get.color(card) == 'black';
                        },
                        viewAs: {
                            name: "jiu",
                        },
                        viewAsFilter: function (player) {
                            if (!player.countCards('h', { color: 'black' })) return false;
                        },
                        prompt: "将一张黑色手牌当酒使用",
                        check: function (card) {
                            if (_status.event.type == 'dying') return 1;
                            return 4 - get.value(card);
                        },
                        ai: {
                            skillTagFilter: function (player) {
                                return player.countCards('h', { color: 'black' }) > 0 && player.hp <= 0;
                            },
                            threaten: 1.5,
                            save: true,
                            basic: {
                                useful: function (card, i) {
                                    if (_status.event.player.hp > 1) {
                                        if (i == 0) return 5;
                                        return 1;
                                    }
                                    if (i == 0) return 7.3;
                                    return 3;
                                },
                                value: function (card, player, i) {
                                    if (player.hp > 1) {
                                        if (i == 0) return 5;
                                        return 1;
                                    }
                                    if (i == 0) return 7.3;
                                    return 3;
                                },
                            },
                            order: function () {
                                return get.order({ name: 'sha' }) + 0.2;
                            },
                            result: {
                                target: function (player, target) {
                                    if (target && target.isDying()) return 2;
                                    if (lib.config.mode == 'stone' && !player.isMin()) {
                                        if (player.getActCount() + 1 >= player.actcount) return 0;
                                    }
                                    var shas = player.getCards('h', 'sha');
                                    if (shas.length > 1 && player.getCardUsable('sha') > 1) {
                                        return 0;
                                    }
                                    var card;
                                    if (shas.length) {
                                        for (var i = 0; i < shas.length; i++) {
                                            if (lib.filter.filterCard(shas[i], target)) {
                                                card = shas[i]; break;
                                            }
                                        }
                                    }
                                    else if (player.hasSha() && player.needsToDiscard()) {
                                        if (player.countCards('h', 'hufu') != 1) {
                                            card = { name: 'sha' };
                                        }
                                    }
                                    if (card) {
                                        if (game.hasPlayer(function (current) {
                                            return (get.attitude(target, current) < 0 &&
                                                target.canUse(card, current, true, true) &&
                                                !current.getEquip('baiyin') &&
                                                get.effect(current, card, target) > 0);
                                        })) {
                                            return 1;
                                        }
                                    }
                                    return 0;
                                },
                            },
                            tag: {
                                save: 1,
                            },
                        },
                    },
                    "ex_huoniu": {
                        trigger: {
                            player: "shaBegin",
                        },
                        forced: true,
                        filter: function (event, player) {
                            return !event.directHit;
                        },
                        content: function () {
                            "step 0"
                            var next = trigger.target.chooseToRespond({ name: 'shan' });
                            next.autochoose = lib.filter.autoRespondShan;
                            next.ai = function (card) {
                                if (trigger.target.num('h', 'shan') > 1) {
                                    return ai.get.unuseful2(card);
                                }
                                return -1;
                            };
                            "step 1"
                            if (result.bool == false) {
                                trigger.untrigger();
                                trigger.directHit = true;
                            }
                        },
                    },
                    "ex_zhenxing": {
                        trigger: {
                            player: "phaseEnd",
                        },
                        filter: function (event, player) {
                            return player.countCards('h') <= 2;
                        },
                        content: function () {
                            player.draw(2)
                        },
                    },
                    "ex_canxian": {
                        trigger: {
                            global: "phaseBegin",
                        },
                        forced: true,
                        filter: function (event, player) {
                            return event.player != player && event.player.hp == event.player.maxHp;
                        },
                        content: function () {
                            trigger.player.damage();
                        },
                        ai: {
                            expose: 0.2,
                            threaten: 1.4,
                        },
                    },
                },
                translate: {
                    "ex_kengsha": "坑杀",
                    "ex_kengsha_info": "锁定技，其他角色因受到你的伤害而进入濒死阶段时，你令其直接死亡",
                    "ex_xuetu": "人屠",
                    "ex_xuetu_info": "其他角色在其回合结束时，你可以摸一张牌，视为你对其使用了一张〔杀〕，只要发动了此技能，你需跳过你的摸牌阶段和出牌阶段，若有角色造成伤害且该伤害来源不为你，你对伤害来源同样可以发动此技能",
                    "ex_qihuo": "奇货",
                    "ex_qihuo_info": "锁定技，你的手牌上限不会因你的体力减少而减少，每当一名其他角色使用基本牌时，你获得之并摸一张牌，你没有摸牌、出牌阶段，你可以将一张黑桃花色的牌当〔无懈可击〕来使用，在你受到伤害后，在你的结束阶段，你可进行一次判定，若结果为黑色，则你选择一个目标使其受到一点伤害然后你回复一点体力",
                    "ex_tunbing": "吞并",
                    "ex_tunbing_info": "当你造成伤害时，可以获得被伤害角色的一张牌",
                    "ex_zulong": "祖龙",
                    "ex_zulong_info": "每当你成为其他角色的卡牌的惟一目标时，你可以弃置两张手牌，将这张牌反弹，之后你获得这张牌，每回合一次，当其他角色使用的牌选定目标为其本身时，你获得一张相同的牌，此时若你的体力值不大于二，则你摸一张牌，若你的体力不大于二则你跳过你的判断阶段，你的手牌上限始终为五",
                    "ex_bianfa": "变法",
                    "ex_bianfa_info": "锁定技，场上所有角色在摸牌阶段不摸牌，在回合结束阶段摸两张牌，当有角色（可以为你）造成伤害时，你与其各获得一张牌（伤害来源为你则你摸两张牌），若因此技能使你的手牌数超过五张，你须将牌弃至五张",
                    "ex_lianheng": "连横",
                    "ex_lianheng_info": "当你造成伤害时，若被伤害角色处于横置状态，则其须选择<br>1.防止此伤害并弃置所有牌<br>2.令此伤害+1<br>当你受到伤害时，若伤害来源处于横置状态，则你防止此次伤害并回复相应的体力<br>此技能无论触发哪一种效果，该名处于横置状态的角色都会在这之后解除横置状态",
                    "ex_qiaoshe": "巧舌",
                    "ex_qiaoshe_info": "开始阶段，将体力不小于你的一名其他角色横置或者重置",
                    "ex_wucheng": "武成",
                    "ex_wucheng_info": "出牌阶段限一次，你可以弃置一张手牌并选择一名角色，使其摸一张牌并对其造成一点伤害，之后你与其翻面，如果该角色的手牌数不小于你，你回复一点体力",
                    "ex_wenjiang": "稳将",
                    "ex_wenjiang_info": "每当你的武将牌翻面时，你可以摸两张牌，你在翻面状态下每受到一点伤害便摸一张牌",
                    "ex_shushou": "戍守",
                    "ex_shushou_info": "锁定技，其他角色在使用〔杀〕时，若目标不为你，则你获得一点护甲值，若为你，则你摸两张牌并弃置一张牌",
                    "ex_zhiyi": "制狄",
                    "ex_zhiyi_info": "锁定技，回合开始阶段，你失去所有护甲，你每因为此技能失去一点护甲，你摸一张牌，你的手牌上限始终等于你的体力上限",
                    "ex_fenshu": "焚书",
                    "ex_fenshu_info": "每当其他角色的某张卡牌有唯一目标时，你可以弃置一张手牌，视为你对牌原本的使用者使用了这张牌",
                    "ex_fazhi": "法制",
                    "ex_fazhi_info": "锁定技，回合结束阶段，你摸等于你已损失体力数的牌",
                    "ex_yuanjiao": "远交",
                    "ex_yuanjiao_info": "在任意一名角色造成伤害后，若你已受伤，你可以选择一名角色，令你与其各摸一张牌",
                    "ex_jingong": "近攻",
                    "ex_jingong_info": "锁定技，当其他角色对你使用〔杀〕时，需额外弃置一张黑色牌，否则此〔杀〕无效并且你摸一张牌",
                    "ex_zhaoxian": "招贤",
                    "ex_zhaoxian_info": "锁定技，游戏开始时、你处于濒死状态时，你获得一名随机武将的全部技能，若此技能在濒死阶段发动，你将体力回复至一并扣除一点体力上限，此技能在你的体力上限不大于二时失效",
                    "ex_xiangcao": "香草",
                    "ex_xiangcao_info": "锁定技，在你受到伤害后进行一次判定，若结果为黑色，则你回复一点体力并摸一张牌",
                    "ex_xunguo": "殉国",
                    "ex_xunguo_info": "锁定技，在你的濒死阶段，场上其他角色弃置所有手牌，若有无法如此做者，其须扣除一点体力上限，之后你扣除一点体力上限并回复体力至一",
                    "ex_poshu": "破蜀",
                    "ex_poshu_info": "觉醒技，当你首次造成伤害或体力值发生变化时，你扣除一点体力上限并摸两张牌，之后获得技能〔攻楚〕〔伐魏〕，若你仍处于受伤状态，则你可以再次回复一点体力",
                    "ex_fawei": "伐魏",
                    "ex_fawei_info": "锁定技，你没有出牌阶段，场上角色的开始阶段，或在其他角色有牌指定你为目标时，你可以摸一张牌并使用一张牌",
                    "ex_gongchu": "攻楚",
                    "ex_gongchu_info": "每当你造成一次伤害，你可以摸一张牌并令被伤害目标弃置一张牌",
                    "ex_qiru": "弃儒",
                    "ex_qiru_info": "觉醒技，你在受到伤害时，若你的体力值不大于二，你须增加一点体力上限，摸两张牌并获得一点护甲，然后获得技能〔从兵〕〔拜将〕",
                    "ex_congbing": "从兵",
                    "ex_congbing_info": "锁定技，每当你使用一张杀时，你摸一张牌",
                    "ex_baijiang": "拜将",
                    "ex_baijiang_info": "限定技，摸牌阶段，若你已受伤，则你可以选择该回合摸牌阶段不摸牌，改为获得1+x张杀，（x为你已损失体力）并且在该回合你使用牌无距离及数量限制",
                    "ex_baijiang2": "拜将",
                    "ex_baijiang2_info": "锁定技，你使用的任何卡牌无数量及距离限制",
                    "ex_fengjian": "讽谏",
                    "ex_fengjian_info": "出牌阶段，你可以将一张锦囊牌当作任意一张通常锦牌来使用，每当你使用一张锦囊牌，你可以摸一张牌展示之并弃一张牌",
                    "ex_chanxian": "馋陷",
                    "ex_chanxian_info": "当你每受到1点伤害，你可以令伤害来源选择一项：1、令你摸两张牌；2、失去1点体力",
                    "ex_bingdao": "兵道",
                    "ex_bingdao_info": "锁定技，当你受到伤害后，你获得一点护甲，若你的体力不小于一，你的体力上限须等于你的体力，伤害来源须将体力上限变更至与你当前体力上限相同",
                    "ex_canbin_a": "残膑",
                    "ex_canbin_a_info": "锁定技，每当场上有一名角色死亡，若此时你的体力上限大于一，你须失去一点体力上限并摸两张牌",
                    "ex_canbin_b": "残膑",
                    "ex_canbin_b_info": "锁定技，当其他角色从濒死状态回复时，你增加一点体力上限并回复一点体力",
                    "ex_canbin": "残膑",
                    "ex_canbin_info": "锁定技，每当场上有一名角色死亡，若此时你的体力上限大于一，你须失去一点体力上限并摸两张牌，当其他角色从濒死状态回复时，你增加一点体力上限并回复一点体力，你死亡时，场上其他体力上限大于一的角色均须减少一点体力上限",
                    "ex_pojun": "破军",
                    "ex_pojun_info": "你可以将一张手牌当〔杀〕使用或打出",
                    "ex_rubi": "入壁",
                    "ex_rubi_info": "当你的〔杀〕造成伤害后，你可以摸一张牌并视为对被伤害目标发起〔决斗〕",
                    "ex_wanbi": "完璧",
                    "ex_wanbi_info": "当你于回合外失去牌时，若你的手牌数小于四，你将手牌补至四张",
                    "ex_qianren": "谦忍",
                    "ex_qianren_info": "锁定技，每当你体力减少时，你须摸一张牌并弃一张牌",
                    "ex_gushou": "固守",
                    "ex_gushou_info": "当其他角色的牌以你为目标时，你可以弃置一张牌取消之",
                    "ex_laoyi": "老矣",
                    "ex_laoyi_info": "锁定技，其他角色的回合结束后，若你已受伤，则你开始你的回合，你的回合结束后，其他角色按原有顺序进行回合",
                    "ex_qishe": "骑射",
                    "ex_qishe_info": "锁定技，你的进攻距离+1，你的防御距离+1",
                    "ex_hufu": "胡服",
                    "ex_hufu_info": "锁定技，你不受延时判定类锦囊影响，出牌阶段，你的杀使用次数+1且可以额外指定一个目标",
                    "ex_nashi": "纳士",
                    "ex_nashi_info": "游戏开始前，或在你受到伤害后，你可以选择任意一名角色，使其获得随机一个技能",
                    "ex_quehu": "却胡",
                    "ex_quehu_info": "每当你打出一张〔闪〕，可以弃置一张牌并对一名体力不为一的角色造成一点伤害",
                    "ex_yuqin": "御秦",
                    "ex_yuqin_info": "你可以将一张基本牌当[闪]打出<br>回合结束时，你摸x张牌（x为你在该回合使用过的牌的数量）",
                    "ex_hezong": "合纵",
                    "ex_hezong_info": "锁定技，当你造成伤害时，你令所有已受伤己方角色摸一张牌，当你回复体力时，你令场上其他角色同时回复一点体力，你不会被横置",
                    "ex_guoxiang": "国相",
                    "ex_guoxiang_info": "锁定技，当我方角色须打出牌时，若其已受伤，可以先从牌堆摸一张牌",
                    "ex_fengbin": "逢膑",
                    "ex_fengbin_info": "限定技，当你处于濒死状态时，你须将体力上限变更至二，之后回复体力至上限",
                    "ex_jianzao": "减灶",
                    "ex_jianzao_info": "出牌阶段限一次，你可以将一张红色牌当作增兵减灶使用",
                    "ex_lianzhan": "连战",
                    "ex_lianzhan_info": "锁定技，你每使用一张牌便从牌堆获得一张牌",
                    "ex_lianke": "连克",
                    "ex_lianke_info": "锁定技，当你成功杀害一名角色时，你须流失一点体力并摸两张牌",
                    "ex_kuangjuan": "狂涓",
                    "ex_kuangjuan_info": "锁定技，当你对一名角色造成伤害时，若该角色的体力小于其最大体力的50％（向下取整）则该伤害+1",
                    "ex_zongheng": "纵横",
                    "ex_zongheng_info": "锁定技，当你使用〔杀〕时，须进行一次判定，红色，则此〔杀〕强制命中；黑色，则此〔杀〕造成的伤害+1",
                    "ex_zongheng2": "纵横",
                    "ex_zongheng2_info": "",
                    "ex_huitian_a": "回天",
                    "ex_huitian_a_info": "",
                    "ex_huitian": "回天",
                    "ex_huitian_info": "",
                    "ex_huitian2": "回天",
                    "ex_huitian2_info": "",
                    "ex_huitian3": "回天",
                    "ex_huitian3_info": "锁定技，当你在一个回合阶段首次进入濒死状态时，将你区域内的牌与体力值恢复至上个回合你摸牌阶段结束后的状态",
                    "ex_jiuse": "酒色",
                    "ex_jiuse_info": "一回合限一次，你可将你的任意一张黑色手牌当【酒】使用。",
                    "ex_huoniu": "火牛",
                    "ex_huoniu_info": "锁定技，你的〔杀〕须两张〔闪〕才可闪避",
                    "ex_zhenxing": "振兴",
                    "ex_zhenxing_info": "结束阶段，若你的手牌数不大于二，可以摸两张牌",
                    "ex_canxian": "残陷",
                    "ex_canxian_info": "锁定技，其他角色开始阶段，若其未受伤，你令其受到一点伤害",
                },
            },
        },
        files: { "character": ["ex_tiandan.jpg"], "card": [], "skill": [] }
    }
})